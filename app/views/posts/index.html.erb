<div class="body-test">

<div class="header" >
  <h1>Threads</h1>
  <h1>#<%= @event.title%></h1>
</div>

<div class="body-test">
  <%= simple_form_for(@post, url: event_posts_path) do |f| %>
    <%= f.error_notification %>
    <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
    <div class="form-inputs">
      <%= f.input :title %>
      <%= f.input :topic, collection: %w[line vibe general social] %>
      <%= f.simple_fields_for :comments do |m| %>
        <%= m.input :content %>
      <% end %>
    </div>
    <div class="form-actions">
      <%= f.button :submit, class: "btn btn-primary mt-2"%>
    </div>
  <% end %>
</div>

<div class="container posts"
  data-controller="posts-channel-subscription"
  data-posts-channel-subscription-event-id-value="<%=@event.id%>"
>

  <div class="container">
    <div class="index-grid" data-posts-channel-subscription-target="posts">
      <% if @posts.any? %>
        <% @posts.each do |post| %>
          <div class="my-5">
            <%= render "posts/post", post: post %>
          </div>
        <% end %>
      <% else %>
        <em>No threads yet..</em>
      <% end %>
    </div>
  </div>
</div>
</div>
